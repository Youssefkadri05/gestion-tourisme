{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\33625\\\\Desktop\\\\M1\\\\SORW\\\\gestion-tourisme\\\\front-end-reactJS\\\\src\\\\AboutApp.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AboutApp extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      userList: [],\n      loading: true,\n      error: null\n    };\n  }\n  componentEstMounte() {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Rediriger l'utilisateur vers la page de connexion s'il n'y a pas de token\n      this.props.history.push('/connexion');\n      return;\n    }\n    try {\n      const response = axios.post('http://localhost:8000/api/login', {\n        username,\n        password\n      });\n      localStorage.setItem('token', response.data.token);\n\n      // Vérifier le token JWT\n      const config = {\n        headers: {\n          Authorization: `Bearer ${response.data.token}`\n        }\n      };\n      const verifyResponse = axios.get('http://localhost:8000/api/protected', config);\n      console.log(verifyResponse.data);\n\n      // Afficher un message de succès\n      alert(\"Bienvenue !\");\n    } catch (error) {\n      // Afficher un message d'erreur\n      alert(\"Username ou mot de passe est incorrect!\");\n    }\n  }\n  render() {\n    const {\n      userList,\n      loading,\n      error\n    } = this.state;\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 14\n      }, this);\n    }\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"User List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Jeton est valide \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default AboutApp;","map":{"version":3,"names":["React","Component","axios","jsxDEV","_jsxDEV","AboutApp","constructor","arguments","state","userList","loading","error","componentEstMounte","token","localStorage","getItem","props","history","push","response","post","username","password","setItem","data","config","headers","Authorization","verifyResponse","get","console","log","alert","render","children","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["C:/Users/33625/Desktop/M1/SORW/gestion-tourisme/front-end-reactJS/src/AboutApp.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nclass AboutApp extends Component {\r\n  state = {\r\n    userList: [],\r\n    loading: true,\r\n    error: null,\r\n  };\r\n\r\n  componentEstMounte() {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      // Rediriger l'utilisateur vers la page de connexion s'il n'y a pas de token\r\n      this.props.history.push('/connexion');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response =  axios.post('http://localhost:8000/api/login', { username, password });\r\n      localStorage.setItem('token', response.data.token);\r\n\r\n      // Vérifier le token JWT\r\n      const config = {\r\n        headers: { Authorization: `Bearer ${response.data.token}` }\r\n      };\r\n      const verifyResponse =  axios.get('http://localhost:8000/api/protected', config);\r\n      console.log(verifyResponse.data);\r\n\r\n      // Afficher un message de succès\r\n      alert(\"Bienvenue !\");\r\n    } catch (error) {\r\n      // Afficher un message d'erreur\r\n      alert(\"Username ou mot de passe est incorrect!\");\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { userList, loading, error } = this.state;\r\n\r\n    if (loading) {\r\n      return <div>Loading...</div>;\r\n    }\r\n\r\n    if (error) {\r\n      return <div>Error: {error}</div>;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <h1>User List</h1>\r\n        <ul>\r\n          <li>Jeton est valide </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AboutApp;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,QAAQ,SAASJ,SAAS,CAAC;EAAAK,YAAA;IAAA,SAAAC,SAAA;IAAA,KAC/BC,KAAK,GAAG;MACNC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,IAAI;MACbC,KAAK,EAAE;IACT,CAAC;EAAA;EAEDC,kBAAkBA,CAAA,EAAG;IACnB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACV;MACA,IAAI,CAACG,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC,YAAY,CAAC;MACrC;IACF;IAEA,IAAI;MACF,MAAMC,QAAQ,GAAIjB,KAAK,CAACkB,IAAI,CAAC,iCAAiC,EAAE;QAAEC,QAAQ;QAAEC;MAAS,CAAC,CAAC;MACvFR,YAAY,CAACS,OAAO,CAAC,OAAO,EAAEJ,QAAQ,CAACK,IAAI,CAACX,KAAK,CAAC;;MAElD;MACA,MAAMY,MAAM,GAAG;QACbC,OAAO,EAAE;UAAEC,aAAa,EAAG,UAASR,QAAQ,CAACK,IAAI,CAACX,KAAM;QAAE;MAC5D,CAAC;MACD,MAAMe,cAAc,GAAI1B,KAAK,CAAC2B,GAAG,CAAC,qCAAqC,EAAEJ,MAAM,CAAC;MAChFK,OAAO,CAACC,GAAG,CAACH,cAAc,CAACJ,IAAI,CAAC;;MAEhC;MACAQ,KAAK,CAAC,aAAa,CAAC;IACtB,CAAC,CAAC,OAAOrB,KAAK,EAAE;MACd;MACAqB,KAAK,CAAC,yCAAyC,CAAC;IAClD;EACF;EAEAC,MAAMA,CAAA,EAAG;IACP,MAAM;MAAExB,QAAQ;MAAEC,OAAO;MAAEC;IAAM,CAAC,GAAG,IAAI,CAACH,KAAK;IAE/C,IAAIE,OAAO,EAAE;MACX,oBAAON,OAAA;QAAA8B,QAAA,EAAK;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAM;IAC9B;IAEA,IAAI3B,KAAK,EAAE;MACT,oBAAOP,OAAA;QAAA8B,QAAA,GAAK,SAAO,EAACvB,KAAK;MAAA;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAO;IAClC;IAEA,oBACElC,OAAA;MAAA8B,QAAA,gBACE9B,OAAA;QAAA8B,QAAA,EAAI;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAK,eAClBlC,OAAA;QAAA8B,QAAA,eACE9B,OAAA;UAAA8B,QAAA,EAAI;QAAiB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAK;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACvB;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACD;EAEV;AACF;AAEA,eAAejC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}